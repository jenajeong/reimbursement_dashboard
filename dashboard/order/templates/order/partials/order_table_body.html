{% load humanize %} 

{% for item in order_items %}
<tr hx-target="this" hx-swap="outerHTML">
    <td>{{ forloop.counter }}</td> 
    
    <td>{{ item.order.customer.name }}</td>
    
    <td class="td-address">{{ item.order.customer.address }}</td>
    
    <td>{{ item.order.customer.contact_number }}</td>

    <td>
        <a href="{% url 'order_detail' item.order.id %}" class="table-link">
            {{ item.book.title_korean }} ({{ item.quantity }}개)
        </a>
    </td>
    
    <td>{{ item.order.order_date|date:"Y.m.d H:i" }}</td>
    
    <td>{{ item.order.delivery_date|date:"Y.m.d"|default:"-" }}</td>
    
    <td>
        <a href="#" class="btn-edit">수정</a> 
        <button 
            hx-post="#"
            hx-confirm="{{ item.order.customer.name }}님의 주문(ID: {{ item.order.id }})을(를) 정말 삭제하시겠습니까?"
            class="btn-delete">
            삭제
        </button>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="8" class="no-data">
        {% if search_query or start_date or order_source != 'all' %}
            검색 조건에 맞는 주문 내역이 없습니다.
        {% else %}
            주문 내역이 없습니다.
        {% endif %}
    </td>
</tr>
{% endfor %}